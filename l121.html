<!DOCTYPE html>
<html>
<head>
    <title>Solar System Simulation with Object Table</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        canvas {
            display: block;
            background-color: black;
            cursor: pointer;
        }
        #infoTable {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: none;
            max-height: 80vh;
            overflow-y: auto;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #444;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #333;
            cursor: pointer;
        }
        th:hover {
            background-color: #555;
        }
        .sort-asc::after {
            content: " ↑";
        }
        .sort-desc::after {
            content: " ↓";
        }
    </style>
</head>
<body>
    <canvas id="solarSystem"></canvas>
    <div id="infoTable">
        <h2>Solar System Objects</h2>
        <table id="objectTable">
            <thead>
                <tr>
                    <th data-sort="name">Name</th>
                    <th data-sort="mass">Mass (kg)</th>
                    <th data-sort="orbitRadius">Orbit Radius (km)</th>
                    <th data-sort="diameter">Diameter (km)</th>
                    <th data-sort="color">Color</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- Table content will be generated by JavaScript -->
            </tbody>
        </table>
    </div>

    <script>
        const canvas = document.getElementById('solarSystem');
        const ctx = canvas.getContext('2d');
        const infoTable = document.getElementById('infoTable');
        const tableBody = document.getElementById('tableBody');
        
        // Set canvas size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // Solar system objects data
        const objects = [
            { name: "Sun", mass: 1.989e30, orbitRadius: 0, diameter: 1392700, color: "yellow", speed: 0, angle: 0 },
            { name: "Mercury", mass: 3.3011e23, orbitRadius: 57909050, diameter: 4879, color: "gray", speed: 47.87, angle: 0 },
            { name: "Venus", mass: 4.8675e24, orbitRadius: 108208000, diameter: 12104, color: "orange", speed: 35.02, angle: 0 },
            { name: "Earth", mass: 5.972e24, orbitRadius: 149598023, diameter: 12742, color: "blue", speed: 29.78, angle: 0 },
            { name: "Mars", mass: 6.417e23, orbitRadius: 227939200, diameter: 6779, color: "red", speed: 24.077, angle: 0 },
            { name: "Jupiter", mass: 1.899e27, orbitRadius: 778570000, diameter: 139820, color: "tan", speed: 13.07, angle: 0 },
            { name: "Saturn", mass: 5.685e26, orbitRadius: 1433530000, diameter: 116460, color: "gold", speed: 9.69, angle: 0 },
            { name: "Uranus", mass: 8.682e25, orbitRadius: 2872460000, diameter: 50724, color: "lightblue", speed: 6.81, angle: 0 },
            { name: "Neptune", mass: 1.024e26, orbitRadius: 4495060000, diameter: 49244, color: "darkblue", speed: 5.43, angle: 0 },
            { name: "Pluto", mass: 1.309e22, orbitRadius: 5906380000, diameter: 2376, color: "brown", speed: 4.74, angle: 0 }
        ];
        
        // Scale factors for visualization
        const distanceScale = 0.0000001;
        const sizeScale = 0.0001;
        
        // Animation variables
        let animationId;
        let isPaused = false;
        let sortColumn = 'name';
        let sortDirection = 1; // 1 for ascending, -1 for descending
        
        // Initialize the solar system
        function init() {
            // Center of the canvas
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            // Draw the background
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw each object
            objects.forEach(obj => {
                // Calculate position
                const x = centerX + obj.orbitRadius * distanceScale * Math.cos(obj.angle);
                const y = centerY + obj.orbitRadius * distanceScale * Math.sin(obj.angle);
                
                // Draw orbit path
                if (obj.orbitRadius > 0) {
                    ctx.beginPath();
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
                    ctx.arc(centerX, centerY, obj.orbitRadius * distanceScale, 0, Math.PI * 2);
                    ctx.stroke();
                }
                
                // Draw the object
                ctx.beginPath();
                ctx.fillStyle = obj.color;
                const radius = Math.max(2, obj.diameter * sizeScale / 2);
                ctx.arc(x, y, radius, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw object name
                ctx.fillStyle = 'white';
                ctx.font = '12px Arial';
                ctx.fillText(obj.name, x + radius + 5, y);
            });
            
            // Update the table
            updateTable();
        }
        
        // Animation loop
        function animate() {
            if (isPaused) return;
            
            // Clear canvas
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Center of the canvas
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            // Update and draw each object
            objects.forEach(obj => {
                // Update angle (position in orbit)
                obj.angle += obj.speed * 0.001;
                
                // Calculate position
                const x = centerX + obj.orbitRadius * distanceScale * Math.cos(obj.angle);
                const y = centerY + obj.orbitRadius * distanceScale * Math.sin(obj.angle);
                
                // Draw orbit path
                if (obj.orbitRadius > 0) {
                    ctx.beginPath();
                    ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';
                    ctx.arc(centerX, centerY, obj.orbitRadius * distanceScale, 0, Math.PI * 2);
                    ctx.stroke();
                }
                
                // Draw the object
                ctx.beginPath();
                ctx.fillStyle = obj.color;
                const radius = Math.max(2, obj.diameter * sizeScale / 2);
                ctx.arc(x, y, radius, 0, Math.PI * 2);
                ctx.fill();
                
                // Draw object name
                ctx.fillStyle = 'white';
                ctx.font = '12px Arial';
                ctx.fillText(obj.name, x + radius + 5, y);
            });
            
            animationId = requestAnimationFrame(animate);
        }
        
        // Update the table with current object data
        function updateTable() {
            // Clear existing table rows
            tableBody.innerHTML = '';
            
            // Sort objects based on current sort column and direction
            const sortedObjects = [...objects].sort((a, b) => {
                // Special handling for color (string comparison)
                if (sortColumn === 'color') {
                    return a.color.localeCompare(b.color) * sortDirection;
                }
                // Numeric comparison for other fields
                return (a[sortColumn] - b[sortColumn]) * sortDirection;
            });
            
            // Add rows for each object
            sortedObjects.forEach(obj => {
                const row = document.createElement('tr');
                
                // Format mass for display (scientific notation for large numbers)
                const formattedMass = obj.mass >= 1e20 ? obj.mass.toExponential(2) : obj.mass.toLocaleString();
                
                row.innerHTML = `
                    <td>${obj.name}</td>
                    <td>${formattedMass}</td>
                    <td>${obj.orbitRadius.toLocaleString()}</td>
                    <td>${obj.diameter.toLocaleString()}</td>
                    <td style="color:${obj.color}">${obj.color}</td>
                `;
                tableBody.appendChild(row);
            });
            
            // Update sort indicators in table headers
            document.querySelectorAll('th').forEach(th => {
                th.classList.remove('sort-asc', 'sort-desc');
                if (th.dataset.sort === sortColumn) {
                    th.classList.add(sortDirection === 1 ? 'sort-asc' : 'sort-desc');
                }
            });
        }
        
        // Event listeners
        canvas.addEventListener('click', () => {
            infoTable.style.display = infoTable.style.display === 'block' ? 'none' : 'block';
        });
        
        // Table header click handler for sorting
        document.querySelectorAll('th').forEach(th => {
            th.addEventListener('click', () => {
                const column = th.dataset.sort;
                if (sortColumn === column) {
                    // Reverse direction if clicking the same column
                    sortDirection *= -1;
                } else {
                    // New column, default to ascending
                    sortColumn = column;
                    sortDirection = 1;
                }
                updateTable();
            });
        });
        
        // Handle window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            init();
        });
        
        // Pause animation when tab is not visible
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                cancelAnimationFrame(animationId);
            } else if (!isPaused) {
                animate();
            }
        });
        
        // Start the simulation
        init();
        animate();
    </script>
</body>
</html>